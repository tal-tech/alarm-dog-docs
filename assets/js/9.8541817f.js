(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{410:function(s,a,t){s.exports=t.p+"assets/img/9cab96cdcac97b1475a172d12044bf1207cd13c0b60950cdd2ffe98abc5edd08.d42a69c7.png"},411:function(s,a,t){s.exports=t.p+"assets/img/c89f662535a33ac2805929c88cf29fa0764301825b1269414b36d1d8df50c8d1.3459ce0e.png"},412:function(s,a,t){s.exports=t.p+"assets/img/56fc23e0b212a26335863359a543e510b80a134f3637c66eb5a503213308496d.d3d27590.png"},413:function(s,a,t){s.exports=t.p+"assets/img/2a60203541280751b46771012011f09a1d342b76f12f989c3e4cac20360003d0.95887c2b.png"},414:function(s,a,t){s.exports=t.p+"assets/img/29887a40640153f23c8e84fa51a39e856db0ac09af8b81893285a1e30ca7e575.4e23eddd.png"},415:function(s,a,t){s.exports=t.p+"assets/img/90b94d36f71bc0f140566cf9f44790f977005451dfd162be90caef8217e47da8.69157a79.png"},470:function(s,a,t){"use strict";t.r(a);var e=t(25),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"step1-登录后台"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#step1-登录后台"}},[s._v("#")]),s._v(" Step1: 登录后台")]),s._v(" "),e("p",[s._v("访问哮天犬后台："),e("a",{attrs:{href:"https://alarm-dog.domain.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://alarm-dog.domain.com"),e("OutboundLink")],1),s._v("，使用钉钉/知音楼扫码或者SSO单点登录或者邮箱登录到哮天犬平台")]),s._v(" "),e("h2",{attrs:{id:"step2-创建任务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#step2-创建任务"}},[s._v("#")]),s._v(" Step2: 创建任务")]),s._v(" "),e("p",[s._v("点击左侧告警任务菜单，然后点击右上角创建任务按钮进入任务创建页。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(410),alt:"图 3"}})]),s._v(" "),e("p",[s._v("进入任务创建页，注意只有基本信息和告警通知人为必填模块，其他模块选填，建议您通过后面介绍了解高级功能之后能合理运用它们提高告警效率。填写好告警任务名称、选择部门，然后点击选项卡告警通知人进入告警通知人配置。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(411),alt:"图 4"}})]),s._v(" "),e("p",[s._v("如果没有提前配置告警通知组，可以点击图中所示区域展开自定义通知渠道配置配置临时通知人。告警通知组或者七大主要通知渠道至少填写一个，知音楼、钉钉机器人可以配置多个机器人，但并不是发送告警给这些所有的机器人，而是前面的机器人发送太多告警被禁言之后，后面的告警机器人作为“替补”，突破单一告警机器人频率限制。")]),s._v(" "),e("p",[s._v("由于钉钉工作通知、钉钉机器人通知频率限制比较严重，建议使用知音楼工作通知、知音楼机器人通知。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(412),alt:"图 5"}})]),s._v(" "),e("p",[s._v("点击保存之后，进入任务详情页。")]),s._v(" "),e("h2",{attrs:{id:"step3：在线告警测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#step3：在线告警测试"}},[s._v("#")]),s._v(" Step3：在线告警测试")]),s._v(" "),e("p",[s._v("哮天犬后台可直接发送测试告警，以测试告警效果。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(413),alt:"图 6"}})]),s._v(" "),e("p",[s._v("安装图中所示输入告警内容之后，能收到如下告警：")]),s._v(" "),e("p",[e("img",{attrs:{src:t(414),alt:"图 7"}})]),s._v(" "),e("h2",{attrs:{id:"step4：告警接口测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#step4：告警接口测试"}},[s._v("#")]),s._v(" Step4：告警接口测试")]),s._v(" "),e("p",[s._v("告警接口请参考 "),e("RouterLink",{attrs:{to:"/alarm/alarm-api.html"}},[s._v("告警接口API")])],1),s._v(" "),e("p",[s._v("首先，我们在任务详情页找到任务ID和token，如下图所示：")]),s._v(" "),e("p",[e("img",{attrs:{src:t(415),alt:"图 9"}})]),s._v(" "),e("p",[s._v("根据告警任务ID和token，我们得到签名信息：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('taskid = 278\ntoken = "dd98e713eee47c65db528e6e0e3c08bc1c7eb867"\ntimestamp = 1592285175\nsign = md5(taskid + "&" + timestamp + token)\n    = md5("278" + "&" + "1592285175" + "dd98e713eee47c65db528e6e0e3c08bc1c7eb867") \n    = md5("278&1592285175dd98e713eee47c65db528e6e0e3c08bc1c7eb867")\n    = "fe986dbec55cae7e0271195cc909ba40"\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("然后我们测试告警：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -X POST "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://alarm-dog-service.domain.com/alarm/report'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-H "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Content-Type: application/json'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-d "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{\n\t"taskid": 278,\n    "timestamp": 1592285175,\n    "sign": "fe986dbec55cae7e0271195cc909ba40",\n    "ctn": {\n        "errno": 10086,\n        "error": "您的余额已不足"\n    }\n}\'')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("p",[s._v("得到响应信息：")]),s._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"data"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"uuid"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"e1b32a26-db8d-4fed-9695-a7152c07a240"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"report_time"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-06-16 13:29:56"')]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"msg"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"success"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"code"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("证明我们告警已发送成功，同时会在配置的通知渠道收到告警。")])])}),[],!1,null,null,null);a.default=n.exports}}]);