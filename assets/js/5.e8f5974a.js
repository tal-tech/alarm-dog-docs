(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{374:function(a,t,e){a.exports=e.p+"assets/img/0af9c5a72975db6402176d4b7c6774bc43ace2231eb7aaf157b26fef2da84ff6.d7df02be.png"},375:function(a,t,e){a.exports=e.p+"assets/img/ce375391aaf0217a850820978002cee2c40646d71590d987b9a21caab82e3ec0.178e7411.png"},376:function(a,t,e){a.exports=e.p+"assets/img/f6f485b4e0ec288d317b7495a9f59c65af57f75f0566d2b61a4915c80f672ef4.986b3352.png"},377:function(a,t,e){a.exports=e.p+"assets/img/41d1a962df7718cc2bfbe77b6d754367cc87bb4a888167b3f1be93a3441a976b.b19aab67.png"},378:function(a,t,e){a.exports=e.p+"assets/img/e1a8d9bd9c2cbd06a12fa2b19446c4df3d89dc164d93383e05e2770f28e50c30.d580f0e9.png"},379:function(a,t,e){a.exports=e.p+"assets/img/1464a5eaabeefc08f887fae05c1c7c5d00ff62be2428a0e7964f3e6b170016ab.4ef95389.png"},380:function(a,t,e){a.exports=e.p+"assets/img/7cc384af97519173ff3a21c606ca001709d46ca9092d977119acb186e21cd5e4.a3e9a9ce.png"},381:function(a,t,e){a.exports=e.p+"assets/img/a64868deed4b2f0ba564ed8cc546fcc6c76db3e9517482a3d0125cd6e792c0a0.7f731ac6.png"},382:function(a,t,e){a.exports=e.p+"assets/img/9a6bd1848ae0f5a51816f56324fe320ddd00bc837beb667442fad1a7bda50256.32cb1057.png"},383:function(a,t,e){a.exports=e.p+"assets/img/d6526c751502998bd567fd3884e4c7003984d458a23f004cb65bdb363ff92234.87c614c5.png"},384:function(a,t,e){a.exports=e.p+"assets/img/b4415e472458171eb1ea98019afaa73f60e1521a9577ee4af74998d22f6abcf5.f4380adc.png"},466:function(a,t,e){"use strict";e.r(t);var s=e(25),c=Object(s.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("哮天犬提供了对阿里云告警的支持，阿里云原生的告警虽然很强大，但是只能将告警发送到钉钉、邮件、短信，且调整不太方便。为此，哮天犬使用阿里云告警的webhook回调方式对阿里云的告警进行分发，使告警可以发送到钉钉工作通知、钉钉群、知音楼工作通知、知音楼群、短信、电话、邮件等渠道，并且可以很方便的查看告警记录，可以使用哮天犬的告警收敛等一系列高级功能。下面讲一下详细步骤：")]),a._v(" "),s("h2",{attrs:{id:"step1：创建哮天犬告警任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#step1：创建哮天犬告警任务"}},[a._v("#")]),a._v(" Step1：创建哮天犬告警任务")]),a._v(" "),s("p",[a._v("前往哮天犬后台 "),s("a",{attrs:{href:"https://alarm-dog.domain.com",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://alarm-dog.domain.com"),s("OutboundLink")],1),a._v("，在告警任务菜单页点击创建告警任务，基本信息、告警通知人等根据实际情况填写，自动恢复和通知模板需要特殊配置一下，否则发送出来的内容可读性非常差。")]),a._v(" "),s("p",[a._v("在自动恢复这里，开启自动恢复，并选择恢复方式为 "),s("code",[a._v("条件恢复")]),a._v("，然后字段填写 "),s("code",[a._v("ctn.alertState")]),a._v("，条件选择 "),s("code",[a._v("等于")]),a._v("，阈值填写 "),s("code",[a._v("OK")]),a._v("。至此，自动恢复已配置完成。")]),a._v(" "),s("p",[s("img",{attrs:{src:e(374),alt:"图 7"}})]),a._v(" "),s("p",[a._v("接着切换到通知模板，然后搜索 "),s("code",[a._v("阿里云告警")]),a._v("，选择该模板：")]),a._v(" "),s("p",[s("img",{attrs:{src:e(375),alt:"图 8"}})]),a._v(" "),s("p",[a._v("如果觉得默认模板不满意，可以选中之后，点另存为重新编辑，保存之后搜索另存为的模板名称即可：")]),a._v(" "),s("p",[s("img",{attrs:{src:e(376),alt:"图 9"}})]),a._v(" "),s("p",[s("img",{attrs:{src:e(377),alt:"图 10"}})]),a._v(" "),s("p",[a._v("有关告警模板的编辑，请参考："),s("RouterLink",{attrs:{to:"/advance-function/alarm-template.html"}},[a._v("告警模板")])],1),a._v(" "),s("h2",{attrs:{id:"step2：获取阿里云告警的url"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#step2：获取阿里云告警的url"}},[a._v("#")]),a._v(" Step2：获取阿里云告警的URL")]),a._v(" "),s("p",[a._v("告警任务创建完成之后，页面会自动跳转到告警任务详情页，在详情页，找到阿里云告警这一项，然后复制该URL以备使用。")]),a._v(" "),s("p",[s("img",{attrs:{src:e(378),alt:"图 11"}})]),a._v(" "),s("h2",{attrs:{id:"step3：配置报警规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#step3：配置报警规则"}},[a._v("#")]),a._v(" Step3：配置报警规则")]),a._v(" "),s("p",[a._v("首先在阿里云的控制台找到对应服务器的报警规则设置按钮，点击进入。该按钮可能会在多个地方出现，以下截图展示的只是其中一种方式：")]),a._v(" "),s("p",[s("img",{attrs:{src:e(379),alt:"图 2"}})]),a._v(" "),s("p",[a._v("进一步找到告警规则创建或者修改已存在的报警规则：")]),a._v(" "),s("p",[s("img",{attrs:{src:e(380),alt:"图 3"}})]),a._v(" "),s("h2",{attrs:{id:"step4：配置告警通知webhook"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#step4：配置告警通知webhook"}},[a._v("#")]),a._v(" Step4：配置告警通知webhook")]),a._v(" "),s("p",[a._v("哮天犬只涉及修改第三步的通知方式，其他的配置请根据实际情况配置，不影响哮天犬告警。")]),a._v(" "),s("p",[s("img",{attrs:{src:e(381),alt:"图 4"}})]),a._v(" "),s("p",[a._v("由于红框中的通知方式无法删除，只能保留阿里云自带的告警通知，此处请根据实际情况妥善处理。")]),a._v(" "),s("p",[s("img",{attrs:{src:e(382),alt:"图 6"}})]),a._v(" "),s("p",[a._v("在报警回调中填写从哮天犬复制的阿里云告警的URL，然后确认保存。")]),a._v(" "),s("p",[s("img",{attrs:{src:e(383),alt:"图 5"}})]),a._v(" "),s("p",[a._v("至此阿里云告警通知配置全部完成。")]),a._v(" "),s("h2",{attrs:{id:"实际效果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实际效果"}},[a._v("#")]),a._v(" 实际效果")]),a._v(" "),s("p",[a._v("如果一旦有告警，会在哮天犬配置的任务中的各通知渠道发送告警，下面截图是告警发送到知音楼群的示例：")]),a._v(" "),s("p",[s("img",{attrs:{src:e(384),alt:"图 12"}})]),a._v(" "),s("p",[a._v("如果觉得发送的告警比较丑，想自己优化，请参考 "),s("a",{attrs:{href:"#step1%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%93%AE%E5%A4%A9%E7%8A%AC%E5%91%8A%E8%AD%A6%E4%BB%BB%E5%8A%A1"}},[a._v("#Step1")]),a._v(" 中的告警通知模板另存为的说明。")]),a._v(" "),s("h2",{attrs:{id:"备注说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#备注说明"}},[a._v("#")]),a._v(" 备注说明")]),a._v(" "),s("p",[a._v("由于阿里云webhook回调发送给哮天犬的参数有限，无法做到100%还原到跟阿里云直接发送到钉钉的一样，请谅解。")])])}),[],!1,null,null,null);t.default=c.exports}}]);