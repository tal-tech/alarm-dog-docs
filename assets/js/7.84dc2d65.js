(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{385:function(t,a,e){t.exports=e.p+"assets/img/f39b12115819e10b612684ab7bbd891c825fec4289f2905945f19a514ce5d3d1.cf1dcd47.png"},386:function(t,a,e){t.exports=e.p+"assets/img/d11dfd8770bc36deeb3fe45209a8e1274e0885b00473cd64d261665f110aae69.61959fbe.png"},387:function(t,a,e){t.exports=e.p+"assets/img/9df5771c4880cae4c9de424c15f4841f999dd6e4ee3a331060dda1e0c2d6d746.3c2c4323.png"},388:function(t,a,e){t.exports=e.p+"assets/img/b772c5c3c00545694e2919b20e27f27aa395b08d8b82ca9dbd78b2ad2707ded0.84019453.png"},389:function(t,a,e){t.exports=e.p+"assets/img/7de572648d5e8b3f965af2c549f34aee18cc68049726a0f71c87df8c8eff181a.46d09c89.png"},390:function(t,a,e){t.exports=e.p+"assets/img/bc25048b52cbbc2114aaf1bd8043db5a9826640e5cf614fdf3b26c269c7f4b83.fd47ba71.png"},391:function(t,a,e){t.exports=e.p+"assets/img/8698794a10c73d45862e485dc79829c75150bdd70a79ef2997277cefccbec4d9.8a3bac07.png"},392:function(t,a,e){t.exports=e.p+"assets/img/f9d4d1c612d61d65176752146defe4a0271916d847fa21d0cd6437e27c943644.1c21a0c0.png"},393:function(t,a,e){t.exports=e.p+"assets/img/2f9270282afec5b723c8c18f4cd3d280b9f71089a3d38a08fa12df41d5e06a3f.7baf1f83.png"},467:function(t,a,e){"use strict";e.r(a);var s=e(25),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("哮天犬也提供了对阿里云Arms告警的支持，阿里云Arms是一个综合性的告警平台，功能强大，提供了邮件、短信、钉钉群和webhook的通知渠道，但是不熟悉好未来业务场景，没法做到将告警很精确的投递到应该投递的地方。哮天犬通过webhook方式接入arms，对告警进行进一步分发，还可以根据告警内容做一些告警收敛、工作流等高级功能，做到无缝与Arms衔接。")]),t._v(" "),s("h2",{attrs:{id:"step1：创建哮天犬告警任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#step1：创建哮天犬告警任务"}},[t._v("#")]),t._v(" Step1：创建哮天犬告警任务")]),t._v(" "),s("p",[t._v("前往哮天犬后台 "),s("a",{attrs:{href:"https://alarm-dog.domain.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://alarm-dog.domain.com"),s("OutboundLink")],1),t._v("，在告警任务菜单页点击创建告警任务，基本信息、告警通知人等根据实际情况填写，通知模板需要特殊配置一下，否则发送出来的内容可读性非常差。")]),t._v(" "),s("p",[t._v("接着切换到通知模板，然后搜索 "),s("code",[t._v("阿里云arms告警")]),t._v("，选择该模板：")]),t._v(" "),s("p",[s("img",{attrs:{src:e(385),alt:"图 1"}})]),t._v(" "),s("p",[t._v("如果觉得默认模板不满意，可以选中之后，点另存为重新编辑，保存之后搜索另存为的模板名称即可：")]),t._v(" "),s("p",[s("img",{attrs:{src:e(386),alt:"图 2"}})]),t._v(" "),s("p",[s("img",{attrs:{src:e(387),alt:"图 3"}})]),t._v(" "),s("p",[t._v("有关告警模板的编辑，请参考："),s("RouterLink",{attrs:{to:"/advance-function/alarm-template.html"}},[t._v("告警模板")])],1),t._v(" "),s("h2",{attrs:{id:"step2：获取阿里云arms告警的url"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#step2：获取阿里云arms告警的url"}},[t._v("#")]),t._v(" Step2：获取阿里云Arms告警的URL")]),t._v(" "),s("p",[t._v("告警任务创建完成之后，页面会自动跳转到告警任务详情页，在详情页，找到阿里云arms这一项，然后复制该URL以备使用。")]),t._v(" "),s("p",[s("img",{attrs:{src:e(388),alt:"图 4"}})]),t._v(" "),s("h2",{attrs:{id:"step3：新建webhook"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#step3：新建webhook"}},[t._v("#")]),t._v(" Step3：新建Webhook")]),t._v(" "),s("p",[t._v("在Arms控制台中找到报警管理菜单，点击展开后找到联系人管理菜单，点击进入后，点击右上角 "),s("code",[t._v("新建webhook")]),t._v(" 按钮创建一个webhook联系人：")]),t._v(" "),s("p",[s("img",{attrs:{src:e(389),alt:"图 6"}})]),t._v(" "),s("p",[t._v("Webhook名称根据情况填写，请求方式必须选择Post，后面的URL填写之前在哮天犬复制的阿里云arms告警的URL，然后Body填写 "),s("code",[t._v("$content")]),t._v("（此文档编写时阿里云Arms有bug，Body必须填写 "),s("code",[t._v('"$content"')]),t._v("）")]),t._v(" "),s("p",[s("img",{attrs:{src:e(390),alt:"图 7"}})]),t._v(" "),s("p",[t._v("在联系人管理也找到联系人组的tab，然后找到或者新建一个联系人组，然后将刚刚创建的webhook关联到联系人组：")]),t._v(" "),s("p",[s("img",{attrs:{src:e(391),alt:"图 8"}})]),t._v(" "),s("h2",{attrs:{id:"step4：配置告警规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#step4：配置告警规则"}},[t._v("#")]),t._v(" Step4：配置告警规则")]),t._v(" "),s("p",[t._v("创建或者编辑告警规则时，如下图所示，勾选Webhook通知，将刚刚创建的联系人组关联进来，然后保存告警规则观察告警情况：")]),t._v(" "),s("p",[s("img",{attrs:{src:e(392),alt:"图 9"}})]),t._v(" "),s("h2",{attrs:{id:"实际效果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实际效果"}},[t._v("#")]),t._v(" 实际效果")]),t._v(" "),s("p",[t._v("如果一旦有告警，会在哮天犬配置的任务中的各通知渠道发送告警，下面截图是告警发送到知音楼群的示例：")]),t._v(" "),s("p",[s("img",{attrs:{src:e(393),alt:"图 5"}})]),t._v(" "),s("p",[t._v("如果觉得发送的告警比较丑，想自己优化，请参考 "),s("a",{attrs:{href:"#step1%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%93%AE%E5%A4%A9%E7%8A%AC%E5%91%8A%E8%AD%A6%E4%BB%BB%E5%8A%A1"}},[t._v("#Step1")]),t._v(" 中的告警通知模板另存为的说明。")])])}),[],!1,null,null,null);a.default=r.exports}}]);