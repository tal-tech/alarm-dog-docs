(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{327:function(e,a,t){e.exports=t.p+"assets/img/3c70ed4c73d2debdc912a957ebd8cd0192c43809e061b3f65c1423ab1e032f5c.98924427.png"},433:function(e,a,t){e.exports=t.p+"assets/img/f7448354b381121febd5ea8ec9e256c71bd9ac5585b02bc7a9ee85aead70b22c.667b425d.png"},434:function(e,a,t){e.exports=t.p+"assets/img/d1a9ac0ba6788f461623fb1a9ae1ccbffcb2f91389485283dbcb283b9f42745d.53f895de.png"},435:function(e,a,t){e.exports=t.p+"assets/img/b37958daa18805e30df31ce97968172274020ac6c2f4de48009b9e4d94e9337e.2e662d88.png"},436:function(e,a,t){e.exports=t.p+"assets/img/41f49211e79f196a3730822a61e1e158ee17ea6bfe8e5ac031d2ed0b034df4b2.43f2e3e2.png"},437:function(e,a,t){e.exports=t.p+"assets/img/5542f964ba0403265d624b01e94ebfc3cf29c4214067f0b2667ef50802167573.f6e9ae81.png"},438:function(e,a,t){e.exports=t.p+"assets/img/696587e96445a7613d48abe7f8c67b88ec60f4f6fd62883dc3b3fd9aa4a4f629.a0471d45.png"},439:function(e,a,t){e.exports=t.p+"assets/img/e944f756422ae645a4a8cbdb49ab1c56c24504222b04738f9fae1e855fb1bf79.cf9c5c93.png"},440:function(e,a,t){e.exports=t.p+"assets/img/5e6e7dd95df9819ce621613f4e5390d7bc0770000db34a7e27159065d176b608.f6187a78.png"},441:function(e,a,t){e.exports=t.p+"assets/img/a8e1d551bb13c90a9272e375865adecc568325c9ba5561a9c615e7c5fc51df8b.5650c198.png"},475:function(e,a,t){"use strict";t.r(a);var s=t(25),c=Object(s.a)({},(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"怎么配置知音楼机器人（知音楼群）通知"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#怎么配置知音楼机器人（知音楼群）通知"}},[e._v("#")]),e._v(" 怎么配置知音楼机器人（知音楼群）通知")]),e._v(" "),s("p",[e._v("在创建告警任务或者告警通知组时，您可能会遇到要配置知音楼机器人（知音楼群）的告警通知，例如下面这样：")]),e._v(" "),s("p",[s("img",{attrs:{src:t(433),alt:"图 49"}})]),e._v(" "),s("p",[e._v("首先点击添加机器人，页面会出现 "),s("code",[e._v("WebToken")]),e._v(" 和 "),s("code",[e._v("Secret")]),e._v(" 两个配置，如果下图所示：")]),e._v(" "),s("p",[s("img",{attrs:{src:t(434),alt:"图 50"}})]),e._v(" "),s("p",[e._v("下面讲解如何配置知音楼机器人。")]),e._v(" "),s("h2",{attrs:{id:"知音楼机器人配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#知音楼机器人配置"}},[e._v("#")]),e._v(" 知音楼机器人配置")]),e._v(" "),s("p",[e._v("进入到知音楼，找一个群，没有则创建，然后点击群右上角群设置，点击智能群助手展开机器人配置：")]),e._v(" "),s("p",[s("img",{attrs:{src:t(435),alt:"图 51"}})]),e._v(" "),s("p",[e._v("点击添加机器人创建按钮：")]),e._v(" "),s("p",[s("img",{attrs:{src:t(436),alt:"图 52"}})]),e._v(" "),s("p",[e._v("选择自定义机器人：")]),e._v(" "),s("p",[s("img",{attrs:{src:t(437),alt:"图 54"}})]),e._v(" "),s("p",[e._v("然后点添加，机器人名称自定义，根据实际情况填写，例如 "),s("code",[e._v("哮天犬监控告警平台")])]),e._v(" "),s("p",[s("img",{attrs:{src:t(438),alt:"图 56"}})]),e._v(" "),s("p",[e._v("点击确定之后，机器人已经创建好了，然后把 "),s("code",[e._v("Webhook")]),e._v(" 复制到浏览器的 "),s("code",[e._v("Webhook")]),e._v(" 中，密钥复制到 "),s("code",[e._v("Secret")]),e._v(" 中：")]),e._v(" "),s("p",[s("img",{attrs:{src:t(439),alt:"图 57"}})]),e._v(" "),s("p",[e._v("至此，一个机器人就配置好了，下面我们可以测试一下我们的配置是否正确，点击绿色的测试按钮，如果成功，机器人会发送一条测试通知，如果失败，浏览器端会提示具体错误：")]),e._v(" "),s("p",[s("img",{attrs:{src:t(440),alt:"图 58"}})]),e._v(" "),s("p",[e._v("测试成功，机器人会收到如下通知：")]),e._v(" "),s("p",[s("img",{attrs:{src:t(441),alt:"图 59"}})]),e._v(" "),s("p",[e._v("至此，一个机器人的配置及测试全部完成。")]),e._v(" "),s("h2",{attrs:{id:"多个机器人的配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#多个机器人的配置"}},[e._v("#")]),e._v(" 多个机器人的配置")]),e._v(" "),s("p",[e._v("如果你需要配置多个机器人，只需要点击添加机器人按钮创建多个机器人配置项，然后重复上面的步骤重复 "),s("a",{attrs:{href:"#%E7%9F%A5%E9%9F%B3%E6%A5%BC%E6%9C%BA%E5%99%A8%E4%BA%BA%E9%85%8D%E7%BD%AE"}},[e._v("知音楼机器人配置")]),e._v(" 创建多个机器人，一个知音楼群可以配置最多10个自定义机器人。")]),e._v(" "),s("h2",{attrs:{id:"为什么要配置多个机器人"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么要配置多个机器人"}},[e._v("#")]),e._v(" 为什么要配置多个机器人")]),e._v(" "),s("p",[e._v("知音楼官方对单个机器人进行了限制，每个机器人一分钟最多允许发送20个通知，如果超过则会限流，甚至禁言10分钟。为了减少这种事情发生，哮天犬支持配置多个机器人，这多个机器人并不是说发送通知时给这些机器人一起发送，而是优先第一个发送，当第一个机器人一分钟发送超过了19次，则进入 "),s("code",[e._v("sleep")]),e._v(" 状态，使用下一个机器人发送，依次类推，如果配置10个机器人，则一分钟最多可以接收 19*10 = 190 条告警，较之前多10倍，这样就从侧面增加了群接收告警的能力。")]),e._v(" "),s("h2",{attrs:{id:"怎样能让告警同时给多个群发送"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#怎样能让告警同时给多个群发送"}},[e._v("#")]),e._v(" 怎样能让告警同时给多个群发送")]),e._v(" "),s("p",[e._v("由于前期设计未考虑这种情况，所以这种场景原则上是不支持的，但是可以利用 "),s("code",[e._v("分级告警")]),e._v(" 功能去实现这种功能，下图是钉钉机器人的示例，知音楼机器人一样的。")]),e._v(" "),s("p",[s("img",{attrs:{src:t(327),alt:"图 42"}})]),e._v(" "),s("p",[e._v("按照上面截图中所示进行配置，即可实现告警通知发给多个机器人，如果需要配置更多个，重复上面的分级告警即可，添加多个分级条件组。")]),e._v(" "),s("h2",{attrs:{id:"为什么收不到告警通知"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么收不到告警通知"}},[e._v("#")]),e._v(" 为什么收不到告警通知")]),e._v(" "),s("ol",[s("li",[e._v("检查知音楼机器人配置是否正确，可以按照 "),s("a",{attrs:{href:"#%E7%9F%A5%E9%9F%B3%E6%A5%BC%E6%9C%BA%E5%99%A8%E4%BA%BA%E9%85%8D%E7%BD%AE"}},[e._v("知音楼机器人配置")]),e._v(" 中的机器人测试来检查，如果存在问题，请修改，最多20s即可生效；")]),e._v(" "),s("li",[e._v("检查知音楼机器人是不是短时间已发送大量告警通知，查看群中1分钟内机器人发送的告警的数量是否超过 "),s("code",[e._v("N * 19")]),e._v(" ，其中 "),s("code",[e._v("N")]),e._v(" 为在哮天犬配置的机器人的个数。")])])])}),[],!1,null,null,null);a.default=c.exports}}]);